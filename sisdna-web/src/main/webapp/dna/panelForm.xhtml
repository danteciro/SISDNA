<f:view contentType="text/html"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:pe="http://primefaces.org/ui/extensions">

                <div class="ui-g">
                    <div class="ui-g-12 ui-md-3"><p:outputLabel value="Código de la DNA:"/>  </div>
                    <div class="ui-g-9"><p:outputLabel  value="#{defensoriaAdministrado.defensoria.txtConstancia}"/>  </div>
                </div>
               <div class="ui-g">
                    <div class="ui-g-12 ui-md-3"><p:outputLabel value="Nombre de la entidad responsable:"/>  </div>
                    <div class="ui-g-9"><p:outputLabel  value="#{defensoriaAdministrado.defensoria.txtEntidad}"/>  </div>
                </div>
                <div class="ui-g">
                    <div class="ui-g-3"><p:outputLabel value="Nombre de la DNA:"/></div>
                    <div class="ui-g-9"><p:outputLabel value="#{defensoriaAdministrado.defensoria.txtNombre}"/></div>
                </div>
                 <div class="ui-g">
                    <div class="ui-g-12 ui-md-3"><p:outputLabel value="Departamento:"/> </div>
                    <div class="ui-g-12 ui-md-2"><p:outputLabel value="#{defensoriaAdministrado.getNombreDepartamento(defensoriaAdministrado.defensoria.nidDepartamento)}" />  </div>
                    <div class="ui-g-12 ui-md-1"><p:outputLabel value="Provincia:"/></div>
                    <div class="ui-g-12 ui-md-2"><p:outputLabel value="#{defensoriaAdministrado.getNombreProvincia(defensoriaAdministrado.defensoria.nidProvincia)}" /></div>
                    <div class="ui-g-12 ui-md-1"><p:outputLabel value="Distrito:"/></div>
                    <div class="ui-g-12 ui-md-3"><p:outputLabel value="#{defensoriaAdministrado.getNombreDistrito(defensoriaAdministrado.defensoria.nidDistrito)}" /></div>
                </div>
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-3"> <p:outputLabel for="txtDocumento" value="Documento de Creación / Constitución de la DNA"/> </div>
                    <div class="ui-g-12 ui-md-9">
                        <p:inputText required="true" id="txtDocumento"  value="#{defensoriaAdministrado.defensoria.defensoriaInfo.txtDocumento}" 
                                     maxlength="150" requiredMessage="Debe ingresar el documento de creación de la DNA">
                        </p:inputText>
                    </div>
                </div>
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-3"> <p:outputLabel for="txtDireccion" value="Dirección de la DNA"/> </div>
                    <div class="ui-g-12 ui-md-9">
                        <p:inputText required="true" id="txtDireccion"  value="#{defensoriaAdministrado.defensoria.defensoriaInfo.txtDireccion}"
                                         maxlength="150" title="Campo Obligatorio"
                                         requiredMessage="Debe ingresar la dirección de la DNA">
                            </p:inputText>
                    </div>
                </div>
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-3">    <p:outputLabel for="txtCorreo" value="Correo electrónico de contacto"/> </div>
                    <div class="ui-g-12 ui-md-5">
                       <p:inputText required="true" id="txtCorreo" value="#{defensoriaAdministrado.defensoria.defensoriaInfo.txtCorreo}" 
                                    requiredMessage="Debe ingresar el correo electrónico de contacto"   
                                 validatorMessage="El correo electrónico #{defensoriaAdministrado.defensoria.defensoriaInfo.txtCorreo} no dispone de un formato válido" maxlength="150" title="Campo Obligatorio">
                        <f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
                         <p:ajax update="@this"/>
                       </p:inputText>
                    </div>
                    <div class="ui-g-12 ui-md-2"> <p:outputLabel for="txtTelefono" value="Teléfono(s)"/></div>
                    <div class="ui-g-12 ui-md-2">  
                        <p:inputText required="true" id="txtTelefono" value="#{defensoriaAdministrado.defensoria.defensoriaInfo.txtTelefono}" maxlength="50">
                         </p:inputText>
                    </div>    
                </div>
              
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-3"> <p:outputLabel for="txtGerencia" value="Dirección o Gerencia a la que pertenece la DNA"/> </div>
                    <div class="ui-g-12 ui-md-9">
                         <p:inputText required="true" id="txtGerencia"  value="#{defensoriaAdministrado.defensoria.defensoriaInfo.txtGerencia}" 
                                      maxlength="150" requiredMessage="Debe ingresar la dirección o gerencia a la que pertenece la DNA">
                         </p:inputText>
                    </div>
                </div>
              
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-3"><p:outputLabel for="txtDias" value="Días y horas de Atención"/></div>
                    <div class="ui-g-12 ui-md-3">
                        <p:inputText required="true" id="txtDias" value="#{defensoriaAdministrado.defensoria.defensoriaInfo.dias}" 
                                     maxlength="50" 
                                     requiredMessage="Debe ingresar los días y horas de atención">
                        </p:inputText>
                    </div>
                    <div class="ui-g-12 ui-md-4"><p:outputLabel for="txtPresupuesto" value="Presupuesto asignado a la DNA (en Soles)"/></div>
                    <div class="ui-g-12 ui-md-2">  
                        <p:inputNumber minValue="0" required="true" id="txtPresupuesto" value="#{defensoriaAdministrado.defensoria.defensoriaInfo.presupuesto}" 
                                       maxlength="8" requiredMessage="Debe ingresar el presupuesto">
                        </p:inputNumber>
                     </div>    
                </div>
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-3"><p:outputLabel for="txtAmbientes" value="Número de ambientes con los que cuenta la DNA"/></div>
                    <div class="ui-g-12 ui-md-1">
                        <p:inputNumber required="true" id="txtAmbientes" value="#{defensoriaAdministrado.defensoria.defensoriaInfo.ambientes}"
                                       minValue="0" maxValue="100" 
                                       requiredMessage="Debe ingresar el número de ambientes con los que cuenta la DNA">
                        </p:inputNumber>
                    </div>
                    <div class="ui-g-12 ui-md-5"><p:outputLabel for="txtAmbientesPrivadas" value="Número de ambientes para audiencias privadas"/></div>
                    <div class="ui-g-12 ui-md-1">  
                        <p:inputNumber required="true" id="txtAmbientesPrivadas" value="#{defensoriaAdministrado.defensoria.defensoriaInfo.ambientesPriv}" 
                                       minValue="0" maxValue="100" 
                                       requiredMessage="Debe ingresar el número de ambientes para audiencias privadas">
                         </p:inputNumber>
                     </div>    
                </div>
    
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-3"><p:outputLabel for="selEstadoDna" value="Estado de la DNA"/></div>
                    <div class="ui-g-12 ui-md-3">  
                        <p:selectOneMenu id="selEstadoDna" 
                                         value="#{defensoriaAdministrado.defensoria.estado.nidCatalogo}" 
                                 autoWidth="false" required="true" requiredMessage="Debe seleccionar el estado de la DNA">
                            <f:selectItem itemLabel="Seleccionar" itemValue="" noSelectionOption="true"/>
                            <f:selectItems value="#{catalogoAdministrado.obtenerEstadosDna()}" var="estadoDna" 
                                           itemLabel="#{estadoDna.txtNombre}" itemValue="#{estadoDna.nidCatalogo}" />
                        </p:selectOneMenu>
                    </div>
                </div>     
               
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-8 ui-lg-8">
                        <p:commandButton  value="AGREGAR RESPONSABLE, DEFENSORES(AS), PROMOTORES(AS) Y PERSONAL DE APOYO"
                                          oncomplete="PF('dialogoPersonalDna').show();" 
                                          actionListener="#{defensoriaAdministrado.initPersona()}"
                                          update="frmPersonalDna"
                                          process="@this"
                                          icon="fa fa-user" title="" class="sombra" style="margin-top: 24px; margin-bottom: 24px">

                       </p:commandButton>
                    </div>
                </div>
            
                <p:dataTable 
                    id="tablaPersonal"
                    widgetVar="tablaPersonal" 
                    var="itemPersonalDna" 
                    value="#{defensoriaAdministrado.defensoria.listaPersonaDna}" 
                    rowIndexVar="index"
                    scrollable="true"
                    paginator="false"
                    resizableColumns="true" emptyMessage="No se encontraron registros"
                    currentPageReportTemplate="Mostrando {startRecord} - {endRecord} de {totalRecords}">

                    <p:column headerText="ACCIONES"  class="pcenter" width="10%">                                       	                                
                        
                        <p:commandButton update="dialogoActualizarPersonal" process="@this"
                                         oncomplete="PF('dialogoActualizarPersonal').show();" 
                                         actionListener="#{defensoriaAdministrado.obtenerPersona(itemPersonalDna)}" 
                                         title="Editar Personal" icon="fa fa-pencil">
                        </p:commandButton>
                        <p:commandButton title="Anular" icon="fa fa-trash" process="@this"
                                         action="#{defensoriaAdministrado.eliminarPersona()}" update=":frmNuevo:tablaPersonal">
                            <f:setPropertyActionListener value="#{itemPersonalDna}" target="#{defensoriaAdministrado.defensoriaPersona}"/>
                             <p:confirm header="Confirmación" message="¿ Está seguro de eliminar la persona ?" />
                        </p:commandButton>
                     
                    </p:column>

                    <p:column headerText="FUNCIÓN"  class="pcenter" width="15%">
                        <h:outputText value="#{itemPersonalDna.funcion.txtNombre}" />
                    </p:column>
                    <p:column headerText="NOMBRES"  class="pcenter" width="20%">
                        <h:outputText value="#{itemPersonalDna.txtNombre1}" />
                    </p:column>

                    <p:column headerText="APELLIDO PATERNO" class="pcenter" width="15%">
                        <h:outputText value="#{itemPersonalDna.txtApellidoPaterno}" />
                    </p:column>

                    <p:column headerText="APELLIDO MATERNO" class="pcenter" width="15%">
                        <h:outputText value="#{itemPersonalDna.txtApellidoMaterno}" />
                    </p:column>

                    <p:column headerText="SEXO" class="pcenter" width="5%">
                        <h:outputText value="#{itemPersonalDna.txtSexo}" />
                    </p:column>
                </p:dataTable>

             
         
            <f:event listener="#{defensoriaAdministrado.validar}" type="postValidate" />

</f:view>
