<f:view contentType="text/html"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:pe="http://primefaces.org/ui/extensions">

                <div class="ui-g">
                    <div class="ui-g-12 ui-md-3"><p:outputLabel value="Código de la DNA:"/>  </div>
                    <div class="ui-g-9"><p:outputLabel  value="#{inscripcionAdministrado.inscripcion.dna.txtConstancia}"/>  </div>
                </div>
               <div class="ui-g">
                    <div class="ui-g-12 ui-md-3"><p:outputLabel value="Nombre de la entidad responsable:"/>  </div>
                    <div class="ui-g-9"><p:outputLabel  value="#{inscripcionAdministrado.inscripcion.dna.txtEntidad}"/>  </div>
                </div>
                <div class="ui-g">
                    <div class="ui-g-3"><p:outputLabel value="Nombre de la DNA:"/></div>
                    <div class="ui-g-9"><p:outputLabel value="#{inscripcionAdministrado.inscripcion.dna.txtNombre}"/></div>
                </div>
                 <div class="ui-g">
                    <div class="ui-g-12 ui-md-3"><p:outputLabel value="Departamento:"/> </div>
                    <div class="ui-g-12 ui-md-2"><p:outputLabel value="#{inscripcionAdministrado.getNombreDepartamento()}" />  </div>
                    <div class="ui-g-12 ui-md-1"><p:outputLabel value="Provincia:"/></div>
                    <div class="ui-g-12 ui-md-2"><p:outputLabel value="#{inscripcionAdministrado.getNombreProvincia()}" /></div>
                    <div class="ui-g-12 ui-md-1"><p:outputLabel value="Distrito:"/></div>
                    <div class="ui-g-12 ui-md-3"><p:outputLabel value="#{inscripcionAdministrado.getNombreDistrito()}" /></div>
                </div>
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-3"> <p:outputLabel for="txtDocumento" value="Documento de Creación / Constitución de la DNA"/> </div>
                    <div class="ui-g-12 ui-md-9">
                        <p:inputText required="true" id="txtDocumento"  value="#{inscripcionAdministrado.inscripcion.txtDocumento}" 
                                     maxlength="150" requiredMessage="Debe ingresar el documento de creación de la DNA">
                        </p:inputText>
                    </div>
                </div>
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-3"> <p:outputLabel for="txtDireccion" value="Dirección de la DNA"/> </div>
                    <div class="ui-g-12 ui-md-9">
                            <p:inputText required="true" id="txtDireccion"  value="#{inscripcionAdministrado.inscripcion.txtDireccion}"
                                         maxlength="150" title="Campo Obligatorio"
                                         requiredMessage="Debe ingresar la dirección de la DNA">
                            </p:inputText>
                    </div>
                </div>
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-3">    <p:outputLabel for="txtCorreo" value="Correo electrónico de contacto"/> </div>
                    <div class="ui-g-12 ui-md-5">
                       <p:inputText required="true" id="txtCorreo" value="#{inscripcionAdministrado.inscripcion.txtCorreo}" 
                                    requiredMessage="Debe ingresar el correo electrónico de contacto"   
                                 validatorMessage="El correo electrónico #{inscripcionAdministrado.inscripcion.txtCorreo} no dispone de un formato válido" maxlength="150" title="Campo Obligatorio">
                        <f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
                         <p:ajax update="@this"/>
                       </p:inputText>
                    </div>
                    <div class="ui-g-12 ui-md-2"> <p:outputLabel for="txtTelefono" value="Teléfono(s)"/></div>
                    <div class="ui-g-12 ui-md-2">  
                        <p:inputText required="true" id="txtTelefono" value="#{inscripcionAdministrado.inscripcion.txtTelefono}" maxlength="50">
                         </p:inputText>
                    </div>    
                </div>
              
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-3"> <p:outputLabel for="txtGerencia" value="Dirección o Gerencia a la que pertenece la DNA"/> </div>
                    <div class="ui-g-12 ui-md-9">
                         <p:inputText required="true" id="txtGerencia"  value="#{inscripcionAdministrado.inscripcion.txtGerencia}" 
                                      maxlength="150" requiredMessage="Debe ingresar la dirección o gerencia a la que pertenece la DNA">
                         </p:inputText>
                    </div>
                </div>
              
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-3"><p:outputLabel for="txtDias" value="Días y horas de Atención"/></div>
                    <div class="ui-g-12 ui-md-3">
                        <p:inputText required="true" id="txtDias" value="#{inscripcionAdministrado.inscripcion.dias}" 
                                     maxlength="50" 
                                     requiredMessage="Debe ingresar los días y horas de atención">
                        </p:inputText>
                    </div>
                    <div class="ui-g-12 ui-md-4"><p:outputLabel for="txtPresupuesto" value="Presupuesto asignado a la DNA (en Soles)"/></div>
                    <div class="ui-g-12 ui-md-2">  
                        <p:inputNumber minValue="0" required="true" id="txtPresupuesto" value="#{inscripcionAdministrado.inscripcion.presupuesto}" 
                                       maxlength="8" requiredMessage="Debe ingresar el presupuesto">
                        </p:inputNumber>
                     </div>    
                </div>
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-3"><p:outputLabel for="txtAmbientes" value="Número de ambientes con los que cuenta la DNA"/></div>
                    <div class="ui-g-12 ui-md-1">
                        <p:inputNumber required="true" id="txtAmbientes" value="#{inscripcionAdministrado.inscripcion.ambientes}"
                                       minValue="0" maxValue="100" 
                                       requiredMessage="Debe ingresar el número de ambientes con los que cuenta la DNA">
                        </p:inputNumber>
                    </div>
                    <div class="ui-g-12 ui-md-5"><p:outputLabel for="txtAmbientesPrivadas" value="Número de ambientes para audiencias privadas"/></div>
                    <div class="ui-g-12 ui-md-1">  
                        <p:inputNumber required="true" id="txtAmbientesPrivadas" value="#{inscripcionAdministrado.inscripcion.ambientesPriv}" 
                                       minValue="0" maxValue="100" 
                                       requiredMessage="Debe ingresar el número de ambientes para audiencias privadas">
                         </p:inputNumber>
                     </div>    
                </div>
               
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-10">
                        <p:commandButton  value="AGREGAR RESPONSABLE, DEFENSORES(AS), PROMOTORES(AS) Y PERSONAL DE APOYO"
                                          oncomplete="PF('dialogoPersonalDna').show();" 
                                          actionListener="#{inscripcionAdministrado.initPersona()}"
                                          update="frmPersonalDna"
                                          process="@this"
                                          icon="fa fa-user" title="" class="sombra" style="margin-top: 24px; margin-bottom: 24px">

                       </p:commandButton>
                    </div>
                </div>
             <p:panelGrid id="pTabla" columns="1" columnClasses="ui-grid-col-12" layout="grid" class="boxshadowinside pnoborder">

                <p:dataTable 
                    id="tablaPersonal"
                    widgetVar="tablaPersonal" 
                    rendered="#{inscripcionAdministrado.listaPersonal!=null and inscripcionAdministrado.listaPersonal.size()>0}"
                    var="itemPersonalDna" 
                    value="#{inscripcionAdministrado.listaPersonal}" 
                    rowIndexVar="index"
                    scrollable="true"
                    paginator="false"
                    resizableColumns="true" emptyMessage="No se encontraron registros"
                    currentPageReportTemplate="Mostrando {startRecord} - {endRecord} de {totalRecords}">

                    <p:column headerText="ACCIONES"  class="pcenter" width="10%">                                       	                                
                        
                        <p:commandButton update="dialogoActualizarPersonal" process="@this"
                                         oncomplete="PF('dialogoActualizarPersonal').show();" 
                                         actionListener="#{inscripcionAdministrado.obtenerPersonalDna(itemPersonalDna)}" 
                                         title="Editar Personal" icon="fa fa-pencil">
                        </p:commandButton>
                        <p:commandButton title="Anular" icon="fa fa-trash" process="@this"
                                         action="#{inscripcionAdministrado.eliminarPersonal()}" update=":formularioPrincipal:pTabla">
                             <f:setPropertyActionListener value="#{itemPersonalDna}" target="#{inscripcionAdministrado.personaDna}"/>
                             <p:confirm header="Confirmación" message="¿ Está seguro de eliminar la persona ?" />
                        </p:commandButton>
                     
                    </p:column>

                    <p:column headerText="FUNCIÓN"  class="pcenter" width="15%">
                        <h:outputText value="#{itemPersonalDna.funcion.txtNombre}" />
                    </p:column>
                    <p:column headerText="NOMBRES"  class="pcenter" width="20%">
                        <h:outputText value="#{itemPersonalDna.txtNombre1}" />
                    </p:column>

                    <p:column headerText="APELLIDO PATERNO" class="pcenter" width="15%">
                        <h:outputText value="#{itemPersonalDna.txtApellidoPaterno}" />
                    </p:column>

                    <p:column headerText="APELLIDO MATERNO" class="pcenter" width="15%">
                        <h:outputText value="#{itemPersonalDna.txtApellidoMaterno}" />
                    </p:column>

                    <p:column headerText="SEXO" class="pcenter" width="5%">
                        <h:outputText value="#{itemPersonalDna.txtSexo}" />
                    </p:column>
                </p:dataTable>

            </p:panelGrid>
             
            <p:dataList id="dlAdjuntos" value="#{inscripcionAdministrado.adjuntos}" var="doc" type="definition" rowIndexVar="indexDoc" >
                <c:set var="nombreFile" value="inscripcionAdministrado.file${indexDoc}" />
                <f:facet name="header">
                    Adjuntar Documentos
                </f:facet>
                <div class="ui-g">
                    <div class="ui-g-12 hidden-md">#{doc.tipo.txtNombre}: <h:outputText value="#{inscripcionAdministrado.getFileName(doc)}"/> </div>
                    <div class="ui-g-12 ui-md-4">
                        <p:fileUpload required="true" fileUploadListener="#{inscripcionAdministrado.handleFileUpload}" mode="advanced" 
                                  label="Adjuntar #{doc.tipo.txtNombre}" 
                                  update="dwArchivo" auto="true" requiredMessage="Debe adjuntar un documento" > 
                            <f:attribute name="rowAdjunto" value="#{doc}" />
                        </p:fileUpload>
                    </div>    
                    <div class="ui-g-12 hidden-xs ui-md-6">
                       <p:outputPanel  id="dwArchivo" >
                          <p:commandButton value="Descargar #{inscripcionAdministrado.getFileName(doc)}"
                                           rendered="#{inscripcionAdministrado.getFileName(doc)!=null}"
                                           ajax="false" process="@this" immediate="true">
                                <p:fileDownload value="#{inscripcionAdministrado.obtenerNombreAdjunto(doc)}" />
                          </p:commandButton>
                       </p:outputPanel>    
                    </div>
                    
                </div>
                    
            </p:dataList>
            <f:event listener="#{inscripcionAdministrado.validar}" type="postValidate" />

</f:view>
