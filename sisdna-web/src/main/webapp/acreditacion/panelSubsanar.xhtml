<f:view contentType="text/html"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:pe="http://primefaces.org/ui/extensions">
        <p:fieldset legend="DATOS DE LA DEMUNA" style="width: 100%">

            <div class="ui-g">
               <div class="ui-g-12 ui-md-3 ui-lg-2"><p:outputLabel value="Código de la DNA:"/>  </div>
               <div class="ui-g-12 ui-md-9 ui-lg-10"><p:outputLabel class="pbold" value="#{acreditacionAdministrado.acreditacion.dna.txtConstancia}"/>  </div>
           </div>
            <div class="ui-g">
               <div class="ui-g-12 ui-md-3 ui-lg-2"><p:outputLabel value="Municipalidad:"/>  </div>
               <div class="ui-g-12 ui-md-9 ui-lg-10"><p:outputLabel  class="pbold" value="#{acreditacionAdministrado.acreditacion.dna.txtEntidad}"/>  </div>
           </div>
           <div class="ui-g">
               <div class="ui-g-12 ui-md-3 ui-lg-2"><p:outputLabel value="Nombre de la DNA:"/></div>
               <div class="ui-g-12 ui-md-9 ui-lg-10"><p:outputLabel class="pbold" value="#{acreditacionAdministrado.acreditacion.dna.txtNombre}"/></div>
           </div>
            <div class="ui-g">
               <div class="ui-g-12 ui-md-3 ui-lg-2"><p:outputLabel value="Departamento:"/> </div>
               <div class="ui-g-12 ui-md-2"><p:outputLabel class="pbold" value="#{acreditacionAdministrado.getNombreDepartamento(acreditacionAdministrado.acreditacion.dna.nidDepartamento)}" />  </div>
               <div class="ui-g-12 ui-md-1"><p:outputLabel value="Provincia:"/></div>
               <div class="ui-g-12 ui-md-2"><p:outputLabel class="pbold" value="#{acreditacionAdministrado.getNombreProvincia(acreditacionAdministrado.acreditacion.dna.nidProvincia)}" />  </div>
               <div class="ui-g-12 ui-md-1"><p:outputLabel value="Distrito:"/></div>
               <div class="ui-g-12 ui-md-2"><p:outputLabel class="pbold" value="#{acreditacionAdministrado.getNombreDistrito(acreditacionAdministrado.acreditacion.dna.nidDistrito)}" />  </div>
           </div>
                    
             
            
                  <div class="ui-g">
                      <div class="ui-g-12 ui-md-3 ui-lg-2 #{acreditacionAdministrado.acreditacion.acreditacionEval != null and 
                                     acreditacionAdministrado.acreditacion.acreditacionEval.obsFecOrdenanza != null?'panelObs':''}"> 
                          <p:outputLabel for="stxtFecOrdenanza" value="Fecha de ordenanza"/> 
                      </div>
                      <div class="ui-g-12 ui-md-2 #{acreditacionAdministrado.acreditacion.acreditacionEval != null and 
                                     acreditacionAdministrado.acreditacion.acreditacionEval.obsFecOrdenanza != null?'panelObs':''}">
                           <p:calendar id="stxtFecOrdenanza" value="#{acreditacionAdministrado.acreditacion.fecOrdenanza}"  
                                      requiredMessage="Debe ingresar la fecha de la ordenanza"
                                      required="true" pattern="dd/MM/yyyy" navigator="true" mask="true" locale="es" />
                            <p:outputPanel rendered="#{acreditacionAdministrado.acreditacion.acreditacionEval != null and
                                                      acreditacionAdministrado.acreditacion.acreditacionEval.obsFecOrdenanza != null}" >
                                          #{acreditacionAdministrado.acreditacion.acreditacionEval.obsFecOrdenanza}
                           </p:outputPanel>
                      </div>
                      <div class="ui-g-12 ui-md-5  #{acreditacionAdministrado.acreditacion.acreditacionEval != null and 
                                     acreditacionAdministrado.acreditacion.acreditacionEval.obsDocCreacion != null?'panelObs':''}">    
                          <p:outputLabel for="stxtNroOrdenanza" value="Número de Ordenanza que incorpora a la DEMUNA en la estructura orgánica municipal"/> 
                      </div>
                      <div class="ui-g-12 ui-md-3 #{acreditacionAdministrado.acreditacion.acreditacionEval != null and 
                                     acreditacionAdministrado.acreditacion.acreditacionEval.obsDocCreacion != null?'panelObs':''}">
                            <p:inputText id="stxtNroOrdenanza" value="#{acreditacionAdministrado.acreditacion.txtDocumento}" 
                                         required="true" requiredMessage="Debe ingresar el Número de ordenanza"
                                         maxlength="100" title="Campo Obligatorio">
                            </p:inputText>
                    
                            <p:outputPanel rendered="#{acreditacionAdministrado.acreditacion.acreditacionEval != null and
                                                       acreditacionAdministrado.acreditacion.acreditacionEval.obsDocCreacion != null}" >
                                           #{acreditacionAdministrado.acreditacion.acreditacionEval.obsDocCreacion}
                            </p:outputPanel>
                       </div>     
                  </div>

                  <div class="ui-g #{acreditacionAdministrado.acreditacion.acreditacionEval != null and 
                                     acreditacionAdministrado.acreditacion.acreditacionEval.obsNorma != null?'panelObs':''}"> 
                        <div class="ui-g-12 ui-md-7"> 
                            <p:outputLabel for="stxtNorma" value="Señale la norma y el artículo de la Ordenanza donde se consigna como función de la DEMUNA: dirigir los procedimientos por riesgo y suscribir resoluliciones y comunicaciones que se emita en los mismos, entre otras funciones"/> </div>
                        <div class="ui-g-12 ui-md-5">
                            <p:inputText required="false" id="stxtNorma" requiredMessage="Debe ingresar la norma y el artículo de la Ordenanza" disabled="#{acreditacionAdministrado.modo eq 6}"
                                          value="#{acreditacionAdministrado.acreditacion.txtNorma}" maxlength="150">
                            </p:inputText>
                             <p:outputPanel rendered="#{acreditacionAdministrado.acreditacion.acreditacionEval != null and
                                                       acreditacionAdministrado.acreditacion.acreditacionEval.obsNorma != null}" >
                                           #{acreditacionAdministrado.acreditacion.acreditacionEval.obsNorma}
                            </p:outputPanel>
                        </div>
                    </div>
                  
                <div class="ui-g #{acreditacionAdministrado.acreditacion.acreditacionEval.obsDireccion!=null?'panelObs':''}" >
                    <div class="ui-g-12 ui-md-3 ui-lg-2 ">    
                        <p:outputLabel for="stxtDireccion" value="Dirección de la DNA"/> 
                    </div>
                    <div class="ui-g-12 ui-md-9 ui-lg-10">
                        <p:inputText id="stxtDireccion" value="#{acreditacionAdministrado.acreditacion.txtDireccion}"  converter="mayusculaConvertidor" 
                                     maxlength="150" title="Campo Obligatorio">
                        </p:inputText>
                        <p:outputPanel rendered="#{acreditacionAdministrado.acreditacion.acreditacionEval.obsDireccion!=null}" >
                            #{acreditacionAdministrado.acreditacion.acreditacionEval.obsDireccion}
                        </p:outputPanel>
                    </div>
                   
                </div>
            
                <div class="ui-g #{acreditacionAdministrado.acreditacion.acreditacionEval.obsCorreo!=null?'panelObs':''}">
                    <div class="ui-g-12 ui-md-3 ui-lg-2">    
                        <p:outputLabel for="stxtCorreo" value="Correo electrónico de contacto"/> 
                    </div>
                    <div class="ui-g-12 ui-md-9 ui-lg-10">
                        <p:inputText id="stxtCorreo" value="#{acreditacionAdministrado.acreditacion.txtCorreo}" 
                                     converter="mayusculaConvertidor" required="true"
                                     requiredMessage="Debe ingresar el correo electrónico de contacto"   
                                     validatorMessage="El correo electrónico #{inscripcionAdministrado.inscripcionSubsanar.txtCorreo} no dispone de un formato válido"
                                     maxlength="150" title="Campo Obligatorio">
                            <f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
                            <p:ajax update="@this"/>
                        </p:inputText>
                         <p:outputPanel rendered="#{acreditacionAdministrado.acreditacion.acreditacionEval.obsCorreo!=null}" >
                            #{acreditacionAdministrado.acreditacion.acreditacionEval.obsCorreo}
                        </p:outputPanel>
                    </div>
                    
                </div>
            
             <div class="ui-g">
                <div class="ui-g-12 ui-md-3 ui-lg-2 #{acreditacionAdministrado.acreditacion.acreditacionEval.obsDias!=null?'panelObs':''}"><p:outputLabel for="stxtDias" value="Días y horas de Atención:"/></div>
                <div class="ui-g-12 ui-md-4 #{acreditacionAdministrado.acreditacion.acreditacionEval.obsDias!=null?'panelObs':''}">
                      <p:inputText required="true" id="stxtDias" value="#{acreditacionAdministrado.acreditacion.dias}" 
                             maxlength="50"  converter="mayusculaConvertidor"
                             requiredMessage="Debe ingresar los días y horas de atención">
                      </p:inputText>
                       <p:outputPanel rendered="#{acreditacionAdministrado.acreditacion.acreditacionEval.obsDias!=null}" class="panelObs">
                            #{acreditacionAdministrado.acreditacion.acreditacionEval.obsDias}
                        </p:outputPanel>
                </div>
                <div class="ui-g-12 ui-md-3 #{acreditacionAdministrado.acreditacion.acreditacionEval.obsGerencia!=null?'panelObs':''}"> 
                     <p:outputLabel for="stxtGerencia" value="Órgano, oficina o área a la que pertenece la DEMUNA:"/> 
                </div>
                <div class="ui-g-12 ui-md-2  ui-lg-3 #{acreditacionAdministrado.acreditacion.acreditacionEval.obsGerencia!=null?'panelObs':''}">
                     <p:inputText required="true" id="stxtGerencia"  value="#{acreditacionAdministrado.acreditacion.txtGerencia}" 
                              maxlength="150" requiredMessage="Debe ingresar el Órgano, oficina o área a la que pertenece la DEMUNA">
                     </p:inputText>
                      <p:outputPanel rendered="#{acreditacionAdministrado.acreditacion.acreditacionEval.obsGerencia!=null}" class="panelObs">
                        #{acreditacionAdministrado.acreditacion.acreditacionEval.obsGerencia}
                      </p:outputPanel>
                 </div>
              </div>

           
     </p:fieldset>
    <p:fieldset legend="CONDICIONES DEL ESPACIO QUE OCUPA LA DEMUNA" style="width: 100%">
                             
      
          <div class="ui-g">
                <div class="ui-g-12 ui-md-4 #{acreditacionAdministrado.acreditacion.acreditacionEval.obsAmbientes!=null?'panelObs':''}">    
                    <p:outputLabel for="stxtAmbientes" value="Número de ambientes con los que cuenta la DNA"/> 
                </div>
                <div class="ui-g-12 ui-md-2 #{acreditacionAdministrado.acreditacion.acreditacionEval.obsAmbientes!=null?'panelObs':''}">
                    <p:inputNumber required="true" id="stxtAmbientes" value="#{acreditacionAdministrado.acreditacion.ambientes}"
                                   minValue="0" maxValue="100"  inputStyle="width: 80px !important"
                                   requiredMessage="Debe ingresar el número de ambientes con los que cuenta la DNA">
                    </p:inputNumber>
                     <p:outputPanel rendered="#{acreditacionAdministrado.acreditacion.acreditacionEval.obsAmbientes!=null}" class="panelObs">
                        #{acreditacionAdministrado.acreditacion.acreditacionEval.obsAmbientes}
                    </p:outputPanel>
                </div>

               <div class="ui-g-12 ui-md-4 #{acreditacionAdministrado.acreditacion.acreditacionEval.obsAmbientesPriv!=null?'panelObs':''}">    
                    <p:outputLabel for="stxtAmbientesPrivadas" value="Número de ambientes para audiencias privadas"/> 
                </div>
                <div class="ui-g-12 ui-md-2 #{acreditacionAdministrado.acreditacion.acreditacionEval.obsAmbientesPriv!=null?'panelObs':''}">
                    <p:inputNumber required="true" id="stxtAmbientesPrivadas" value="#{acreditacionAdministrado.acreditacion.ambientesPriv}" 
                                   minValue="0" maxValue="100"  inputStyle="width: 80px !important"
                                   requiredMessage="Debe ingresar el número de ambientes para audiencias privadas">
                     </p:inputNumber>
                     <p:outputPanel rendered="#{acreditacionAdministrado.acreditacion.acreditacionEval.obsAmbientesPriv!=null}" class="panelObs">
                        #{acreditacionAdministrado.acreditacion.acreditacionEval.obsAmbientesPriv}
                    </p:outputPanel>
                </div>
        </div>
    
        <div class="ui-g #{!acreditacionAdministrado.acreditacion.flgEquipoComputo ?'panelObs':''}">
             <div class="ui-g-12 ui-md-8">
                <p:outputLabel for="sflgEquipoComputo" value="¿Cuenta con equipo de cómputo a disposición de cada personal de la DEMUNA?"/> 
            </div>
            <div class="ui-g-12 ui-md-1">    
                <p:selectBooleanCheckbox id="sflgEquipoComputo" value="#{acreditacionAdministrado.acreditacion.flgEquipoComputo}">
                </p:selectBooleanCheckbox>
            </div>
           
        </div>
        
        <div class="ui-g #{!acreditacionAdministrado.acreditacion.flgImpresora  ?'panelObs':''}">
             <div class="ui-g-12 ui-md-8">
                <p:outputLabel for="sflgImpresora" value="¿Cuenta con impresora a disposición de la DEMUNA?"/> 
            </div>
            <div class="ui-g-12 ui-md-1">    
                <p:selectBooleanCheckbox id="sflgImpresora" value="#{acreditacionAdministrado.acreditacion.flgImpresora}">
                </p:selectBooleanCheckbox>
            </div>
           
        </div>
    
        <div class="ui-g #{!acreditacionAdministrado.acreditacion.flgInternet ?'panelObs':''}">
             <div class="ui-g-12 ui-md-8">
                <p:outputLabel for="sflgInternet" value="¿Cuenta con conexión a internet en la DEMUNA?"/> 
            </div>
            <div class="ui-g-12 ui-md-1">    
                <p:selectBooleanCheckbox id="sflgInternet" value="#{acreditacionAdministrado.acreditacion.flgInternet}">
                </p:selectBooleanCheckbox>
            </div>
           
        </div>
    
        <div class="ui-g #{!acreditacionAdministrado.acreditacion.flgArchivadores ?'panelObs':''}">
             <div class="ui-g-12 ui-md-8">
                <p:outputLabel for="sflgArchivadores" value="¿Los archivadores y escritorios son seguros para el resguardo de los expedientes sobre riesgo de desprotección y otros de la DEMUNA?"/> 
            </div>
            <div class="ui-g-12 ui-md-1">    
                <p:selectBooleanCheckbox id="sflgArchivadores" value="#{acreditacionAdministrado.acreditacion.flgArchivadores}">
                </p:selectBooleanCheckbox>
            </div>
           
        </div>
    
        <div class="ui-g #{!acreditacionAdministrado.acreditacion.flgAccesibilidad ?'panelObs':''}">
              <div class="ui-g-12 ui-md-8">
                <p:outputLabel value="¿El Local garantiza la accesibilidad de niñas, niños, adolescentes, madres gestantes o personas con discapacidad?"/> 
            </div>
            <div class="ui-g-12 ui-md-1">    
                <p:selectBooleanCheckbox id="sflgAccesibilidad" value="#{acreditacionAdministrado.acreditacion.flgAccesibilidad}">
                </p:selectBooleanCheckbox>
            </div>
          
        </div>
        
        <div class="ui-g #{!acreditacionAdministrado.acreditacion.flgAreaLudica ?'panelObs':''}">
            <div class="ui-g-12 ui-md-8">
                <p:outputLabel value="¿Cuenta con un área lúdica para la atención de niñas, niños y adolescentes?"/> 
            </div>
            <div class="ui-g-12 ui-md-1">    
                <p:selectBooleanCheckbox id="sflgAreaLudica" value="#{acreditacionAdministrado.acreditacion.flgAreaLudica}">
                </p:selectBooleanCheckbox>
            </div>
            
        </div>
      <div class="ui-g #{acreditacionAdministrado.acreditacion.acreditacionEval != null and 
                           acreditacionAdministrado.acreditacion.acreditacionEval.obsEstadoCons != null?'panelObs':''}">
            <div class="ui-g-12 ui-md-8">    
                <p:outputLabel for="stxtEstadoCons" value="¿Cuál es el estado de conservación de la oficina de DEMUNA?"/> 
            </div>
            <div class="ui-g-12 ui-md-4">
                   <p:selectOneRadio required="true" id="stxtEstadoCons" value="#{acreditacionAdministrado.acreditacion.txtEstadoCons}"
                                     requiredMessage="Debe seleccionar el estado de Conservación">
                       <f:selectItem itemLabel="BUENO" itemValue="1" />
                       <f:selectItem itemLabel="REGULAR" itemValue="2" />
                       <f:selectItem itemLabel="MALO" itemValue="3" />
                   </p:selectOneRadio>
               
                    <p:outputPanel rendered="#{acreditacionAdministrado.acreditacion.acreditacionEval != null and
                                               acreditacionAdministrado.acreditacion.acreditacionEval.obsEstadoCons != null}" >
                        #{acreditacionAdministrado.acreditacion.acreditacionEval.obsEstadoCons}
                    </p:outputPanel>
           </div> 
        </div>
        <div class="ui-g">
            <div class="ui-g-12 ui-lg-6">
                <p:commandButton  value="AGREGAR PERSONA AL EQUIPO"
                                              oncomplete="PF('dialogoPersonalDnaSub').show();" 
                                              actionListener="#{acreditacionAdministrado.initPersonaAdd()}"
                                              update=":frmNuevo:tablaPersonasSubsanar, :dialogoPersonalDnaSub"
                                              process="@this"
                                              icon="fa fa-user" title="" class="sombra">
                </p:commandButton>
            </div>
      </div>
        
      <div class="ui-g">
            <div class="ui-g-12">
          
       <p:dataTable 
           id="tablaPersonasSubsanar"
           widgetVar="tablaPersonasSubsanar" 
           var="item" 
           value="#{acreditacionAdministrado.equipoExterno}" 
           rowIndexVar="index"
           scrollable="true"
           rows="10" 
           paginator="false"
           resizableColumns="false"
           emptyMessage="No se encontraron registros"
           currentPageReportTemplate="Mostrando {startRecord} - {endRecord} de {totalRecords}">

           <p:column headerText="ACCIONES"  class="pcenter" width="12%">      
            
                <p:commandButton 
                            update=":dialogoPersonaSubsanar"  process="@this"
                                oncomplete="PF('dialogoPersonaSubsanar').show();"  
                                actionListener="#{acreditacionAdministrado.obtenerPersonaExternoActualizar(item)}" 
                                title="Evaluar" icon="fa fa-check">
                </p:commandButton>
                 <p:commandButton 
                                actionListener="#{acreditacionAdministrado.removerPersonaActualizar(item)}" 
                                update="@form:tablaPersonasSubsanar"  process="@this"
                                icon="fa fa-trash" title="Elimina a la persona" >
                        <p:confirm header="Confirmación" message=" ¿ Está seguro de eliminar a la persona ?" />  
                  </p:commandButton>	

             
           </p:column>

           <p:column headerText="FUNCIÓN"  class="pcenter" width="15%">
               <h:outputText value="#{item.funcion.txtNombre}" />
           </p:column>
           <p:column headerText="NOMBRES"  class="pcenter" width="20%">
               <h:outputText value="#{item.txtNombre1}" />
           </p:column>

           <p:column headerText="APELLIDO PATERNO" class="pcenter" width="15%">
               <h:outputText value="#{item.txtApellidoPaterno}" />
           </p:column>

           <p:column headerText="APELLIDO MATERNO" class="pcenter" width="15%">
               <h:outputText value="#{item.txtApellidoMaterno}" />
           </p:column>

           <p:column headerText="SEXO" class="pcenter" width="5%">
               <h:outputText value="#{item.txtSexo}" />
           </p:column>

       </p:dataTable>
  </div>
      </div>
    
    <div class="ui-g #{acreditacionAdministrado.acreditacion.acreditacionEval != null and 
                       acreditacionAdministrado.acreditacion.acreditacionEval.obsDocs != null?'panelObs':''}">
      
        <div class="ui-g-12 ui-md-12">  
            <p:dataList id="sdlAdjuntos" value="#{acreditacionAdministrado.adjuntos}" var="doc" type="definition" rowIndexVar="indexDoc" emptyMessage="No hay tipo de archivos registrados">
                    <c:set var="nombreFile" value="acreditacionAdministrado.file${indexDoc}" />
                      <f:facet name="header">
                        Documentos Adjuntos
                    </f:facet>
                    <div class="ui-g">
                         <div class="ui-g-12 ui-md-4">
                            <p:fileUpload required="true" fileUploadListener="#{acreditacionAdministrado.handleFileUpload}" mode="advanced" 
                                      label="Adjuntar #{doc.tipo.txtNombre}" 
                                      update="sdwArchivo" auto="true" requiredMessage="Debe adjuntar un documento" > 
                                <f:attribute name="rowAdjunto" value="#{doc}" />
                            </p:fileUpload>
                        </div>    
                        <div class="ui-g-12 hidden-xs ui-md-6">
                           <p:outputPanel  id="sdwArchivo" >
                                 <p:commandLink  ajax="false" process="@this" immediate="true" style="line-height: 20px; margin-left: 12px;"
                                            value="Descargar #{acreditacionAdministrado.getFileName(doc)}">
                                       <p:fileDownload value="#{acreditacionAdministrado.obtenerNombreAdjunto(doc)}" />
                                   </p:commandLink>

                           </p:outputPanel>    
                        </div>

                    </div>
             </p:dataList>
        </div>
        <p:outputPanel rendered="#{acreditacionAdministrado.acreditacion.acreditacionEval != null and
                                   acreditacionAdministrado.acreditacion.acreditacionEval.obsDocs != null}" >
             #{acreditacionAdministrado.acreditacion.acreditacionEval.obsDocs}
         </p:outputPanel>
    </div>
  </p:fieldset>
</f:view>
