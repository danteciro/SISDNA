<f:view contentType="text/html"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:pe="http://primefaces.org/ui/extensions">
    
    
    <p:dialog  modal="true" id="dialogoAcreditacionInterno" widgetVar="dialogoAcreditacionInterno" header="Generar Acreditación" closeOnEscape="true" resizable="false" width="900px" height="760px" dynamic="false">
        <h:form id="formAcreditacionInterno">
            <ui:include src="panelForm.xhtml"/>
             <br></br>
            <p:panelGrid columns="1" columnClasses="ui-grid-col-12" layout="grid" class="pnoborder pright">
                <p:column>
                    <p:commandButton value="Guardar"
                                     icon="ui-icon-disk" 
                                     title="Guarda los cambios" 
                                     actionListener="#{acreditacionAdministrado.crearAcreditacionExterna()}" 
                                     oncomplete="if (!args.validationFailed) PF('dialogoAcreditacionInterno').hide()"
                                     process="@form"
                                     update=":formularioPrincipal:tablaDefensoria"/>	
                    <p:commandButton value="Cerrar" onclick="PF('dialogoAcreditacionInterno').hide();" immediate="true" process="@this" icon="ui-icon-cancel" title="Cierra el dialogo"/>
                </p:column>
            </p:panelGrid>
            <f:event listener="#{acreditacionAdministrado.validarCreate}" type="postValidate" />
        </h:form>    
    </p:dialog>
    
    
    <p:dialog  modal="true" id="dialogoEquipo" widgetVar="dialogoEquipo" header="Persona Equipo" closeOnEscape="true" resizable="false" dynamic="false">
        <h:form id="formEquipo">
           <ui:include src="panelPersonalExterno.xhtml"/>
             <br></br>
            <p:panelGrid columns="1" columnClasses="ui-grid-col-12" layout="grid" class="pnoborder pright">
                <p:column>
                    <p:commandButton value="Guardar"
                                     icon="ui-icon-disk" 
                                     title="Guarda los cambios" 
                                     actionListener="#{acreditacionAdministrado.agregarAEquipo()}" 
                                     oncomplete="if (!args.validationFailed) PF('dialogoEquipo').hide()"
                                     update="@form :formAcreditacionInterno:tablaEquipo"/>	
                    <p:commandButton value="Cerrar" onclick="PF('dialogoEquipo').hide();" immediate="true" process="@this" icon="ui-icon-cancel"/>
                </p:column>
            </p:panelGrid>
             <f:event listener="#{acreditacionAdministrado.validarPanelPersona}" type="postValidate" />
        </h:form>    
    </p:dialog>

    <p:dialog modal="true" id="dialogoActualizarPersonaEquipo" widgetVar="dialogoActualizarPersonaEquipo" header="Equipo" closeOnEscape="true" resizable="false" dynamic="false">
        <h:form>
            <ui:include src="panelPersonalExterno.xhtml" />
            <br></br>
            <p:panelGrid columns="1" columnClasses="ui-grid-col-12" layout="grid" class="pnoborder pright">
                <p:column>
                    <p:commandButton value="Guardar" 
                                     actionListener="#{acreditacionAdministrado.actualizarPersonaEquipoExterno()}" 
                                     update=":formAcreditacionInterno:tablaEquipo" 
                                     oncomplete="if (!args.validationFailed) PF('dialogoActualizarPersonaEquipo').hide()" 
                                     icon="ui-icon-disk" title="Guarda los cambios"/>	
                    <p:commandButton value="Cerrar" onclick="PF('dialogoActualizarPersonaEquipo').hide();" immediate="true" process="@this" icon="ui-icon-cancel"/>
                </p:column>
            </p:panelGrid>
            <f:event listener="#{acreditacionAdministrado.validarPanelPersona}" type="postValidate" />
        </h:form>
    </p:dialog>

    <p:dialog modal="true" id="dialogoVerPersonaEquipo" widgetVar="dialogoVerPersonaEquipo" header="Persona" closeOnEscape="true" resizable="false" dynamic="false">
        <h:form>
            <ui:include src="panelPersonaVer.xhtml" />
            <br></br>
            <p:panelGrid columns="1" columnClasses="ui-grid-col-12" layout="grid" class="pnoborder pright">
                <p:column>
                    <p:commandButton value="Cerrar" onclick="PF('dialogoVerPersonaEquipo').hide();" immediate="true" process="@this" icon="ui-icon-cancel"/>
                </p:column>
            </p:panelGrid>
        </h:form>
    </p:dialog>
    
    <p:dialog modal="true" id="dialogoAnularPersonaEquipo" widgetVar="dialogoAnularPersonaEquipo" header="Confirmación" closeOnEscape="true" resizable="false" dynamic="false">
       <h:form>
           ¿ Está seguro de eliminar la persona ?
           <p:panelGrid columns="1" columnClasses="ui-grid-col-12" layout="grid" class="pnoborder pright">
               <p:column>
                   <p:commandButton value="SÍ" 
                                    actionListener="#{acreditacionAdministrado.removerPersonaExterno()}" 
                                    update=":formAcreditacionInterno:tablaEquipo" 
                                    oncomplete="if (!args.validationFailed) PF('dialogoAnularPersonaEquipo').hide()" 
                                    icon="ui-icon-disk" title="Guarda los cambios"/>	
                   <p:commandButton value="NO" onclick="PF('dialogoAnularPersonaEquipo').hide();" immediate="true" process="@this" icon="ui-icon-cancel" title="Cierra el dialogo"/>
               </p:column>
           </p:panelGrid>
       </h:form>
   </p:dialog>
    
        
</f:view>
