<f:view contentType="text/html"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:pe="http://primefaces.org/ui/extensions">
    
    
   <p:dialog modal="true" id="dialogoSubsanar" widgetVar="dialogoSubsanar" header="Subsanar Observaciones" 
            closeOnEscape="true" resizable="false" dynamic="false"
            style="max-width: 800px" height="760px">
      <h:form id="formSubsanarAcreditacion">
          <ui:include src="panelSubsanar.xhtml" />
           <br></br>
          <p:panelGrid columns="1" columnClasses="ui-grid-col-12" layout="grid" class="pnoborder pright">
              <p:column>
                  <p:commandButton value="Subsanar las Observaciones" 
                                   title="Guarda los cambios" 
                                   oncomplete="if (!args.validationFailed) PF('dialogoSubsanar').hide()" 
                                   update=":formularioPrincipal:tablaDocs"
                                   actionListener="#{acreditacionAdministrado.subsanar()}" 
                                   process="@form"
                                   icon="ui-icon-check">
                                   <p:confirm header="Confirmación" message="¿ Está seguro de subsanar la acreditación ?" />  
                  </p:commandButton>
                  <p:commandButton value="Cerrar" onclick="PF('dialogoSubsanar').hide();" immediate="true" icon="ui-icon-cancel" process="@this"/>

              </p:column>
          </p:panelGrid>
           <f:event listener="#{acreditacionAdministrado.validarCreate}" type="postValidate" />
      </h:form>    
  </p:dialog>

   <p:dialog   modal="true" id="dialogoPersonaSubsanar" widgetVar="dialogoPersonaSubsanar" header="Subsanar Personal DNA" 
               height="500px" closeOnEscape="true" resizable="false" dynamic="false">
      <h:form>
         <ui:include src="panelPersonaSubsanar.xhtml"/>
           <br></br>
          <p:panelGrid columns="1" columnClasses="ui-grid-col-12" layout="grid" class="pnoborder pright">
              <p:column >
                  <p:commandButton value="Subsanar Observaciones de Persona" 
                                   title="Guarda los cambios" 
                                   oncomplete="if (!args.validationFailed) PF('dialogoPersonaSubsanar').hide()"
                                   actionListener="#{acreditacionAdministrado.actualizarPersonaEquipoExterno()}" 
                                   process="@form"
                                   icon="ui-icon-check"/>    
                  <p:commandButton value="Cerrar" onclick="PF('dialogoPersonaSubsanar').hide();" immediate="true" process="@this" icon="ui-icon-cancel"/>
              </p:column>
          </p:panelGrid>
           <f:event listener="#{acreditacionAdministrado.validarPanelPersona}" type="postValidate" />
      </h:form>    
  </p:dialog>      
  <p:dialog modal="true" id="dialogoAnularPersonaSubsanar" widgetVar="dialogoAnularPersonaSubsanar" header="Equipo" closeOnEscape="true" resizable="false" dynamic="false">
      <h:form>
          ¿ Está seguro de eliminar la persona ?
          <p:panelGrid columns="1" columnClasses="ui-grid-col-12" layout="grid" class="pnoborder pright">
              <p:column>
                  <p:commandButton value="SÍ" 
                                   actionListener="#{acreditacionAdministrado.removerPersonaActualizar()}" 
                                   update=":formSubsanarAcreditacion:tablaPersonasSubsanar" 
                                   oncomplete="if (!args.validationFailed) PF('dialogoAnularPersonaSubsanar').hide()" 
                                   icon="ui-icon-disk" title="Guarda los cambios"/>	
                  <p:commandButton value="NO" onclick="PF('dialogoAnularPersonaSubsanar').hide();" immediate="true" process="@this" icon="ui-icon-cancel"/>
              </p:column>
          </p:panelGrid>
      </h:form>
  </p:dialog>
    
     <p:dialog  modal="true" id="dialogoPersonalDnaSub" widgetVar="dialogoPersonalDnaSub" width="90%" style="max-width: 900px" height="500px" 
                header="Personal DNA" closeOnEscape="true" resizable="false" dynamic="false">
         <h:form id="frmPersonalDnaSub">
            <ui:include src="panelPersonalExterno.xhtml"/>
              <br></br>
             <p:panelGrid columns="1" columnClasses="ui-grid-col-12" layout="grid" class="pnoborder pright">
                 <p:column>
                     <p:commandButton value="Guardar" 
                                      icon="ui-icon-disk" 
                                      title="Guarda los datos de las persona" 
                                      actionListener="#{acreditacionAdministrado.agregarAEquipo()}"
                                      oncomplete="if (!args.validationFailed) PF('dialogoPersonalDnaSub').hide()"
                                      update="@form :formSubsanarAcreditacion:tablaPersonasSubsanar"/>	
                     <p:commandButton value="Cerrar" onclick="PF('dialogoPersonalDnaSub').hide();" immediate="true" icon="ui-icon-cancel" process="@this"/>
                 </p:column>
             </p:panelGrid>
              <f:event listener="#{acreditacionAdministrado.validarPanelPersona}" type="postValidate" />
         </h:form>    
     </p:dialog>
        
</f:view>
